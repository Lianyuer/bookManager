<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>图书管理系统-首页</title>
    <link
      href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.6.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- jQuery and JavaScript Bundle with Popper -->
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.6.2/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="./css/main.css" />
    <link rel="stylesheet" href="./font/iconfont.css" />
    <link rel="stylesheet" href="./css/my_alert.css" />
  </head>
  <body>
    <div class="divAll">
      <!-- 框架 -->
      <div class="divTop">
        <h2>后台管理系统</h2>
        <div class="desc">
          <div class="iconfont icon-touxiang person"></div>
          <a
            href="#"
            class="iconfont icon-ai-out exit"
            data-toggle="modal"
            data-target="#myModal"
            >&nbsp; 安全退出</a
          >
        </div>
      </div>
      <div class="divMiddle">
        <div class="divLeft">
          <div id="ulShow"></div>
        </div>
        <div class="divRight">
          <iframe
            name="iframe1"
            width="100%"
            height="99%"
            frameborder="0"
          ></iframe>
        </div>
      </div>
      <!-- 警告框 -->
      <div class="my_alert">
        <div class="alert alert-success alert-dismissible" role="alert">
          <button
            type="button"
            class="close"
            data-dismiss="alert"
            aria-label="Close"
          >
            <span aria-hidden="true">&times;</span>
          </button>
          <div class="msgText">xxxx</div>
        </div>
        <div class="alert alert-danger alert-dismissible" role="alert">
          <button
            type="button"
            class="close"
            data-dismiss="alert"
            aria-label="Close"
          >
            <span aria-hidden="true">&times;</span>
          </button>
          <div class="msgText">xxxx</div>
        </div>
        <div class="alert alert-warning alert-dismissible" role="alert">
          <button
            type="button"
            class="close"
            data-dismiss="alert"
            aria-label="Close"
          >
            <span aria-hidden="true">&times;</span>
          </button>
          <div class="msgText">xxxx</div>
        </div>
        <div class="alert alert-info alert-dismissible" role="alert">
          <button
            type="button"
            class="close"
            data-dismiss="alert"
            aria-label="Close"
          >
            <span aria-hidden="true">&times;</span>
          </button>
          <div class="msgText">xxxx</div>
        </div>
      </div>
      <!-- 模态框 -->
      <div
        class="modal fade"
        id="myModal"
        tabindex="-1"
        aria-labelledby="myModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="myModalLabel">温馨提示</h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">确认要退出吗？</div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-dismiss="modal"
              >
                关闭
              </button>
              <button
                type="button"
                class="btn btn-primary"
                onclick="exit()"
                data-dismiss="modal"
              >
                确认退出
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script src="./js/my_alert.js"></script>
  <script src="./js/treeMenu.js"></script>
  <script>
    let user;
    // 窗体加载事件，获取用户信息
    window.onload = function () {
      if (localStorage.getItem("userInfo")) {
        user = JSON.parse(localStorage.getItem("userInfo")).realName;
        $(" .desc .person").html("&nbsp;&nbsp;" + user);
        // 生成树形结构菜单
        showMenu();
      } else {
        showAlert(1, "请先登录");
        setTimeout(() => {
          location.href = "./login.html";
        }, 800);
      }
    };
    function exit() {
      localStorage.removeItem("loginUser");
      showAlert("0", "退出成功");
      setTimeout(() => {
        location.href = "./login.html";
      }, 1000);
    }
  </script>
</html>
